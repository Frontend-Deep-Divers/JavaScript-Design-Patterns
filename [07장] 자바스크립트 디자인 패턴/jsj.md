# 7장 자바스크립트 디자인 패턴

## 7.1 생성 패턴

- 생성 패턴은 객체를 생성하는 방법을 다룬다.

## 7.2 생성자 패턴

- 생성자는 객체가 새로 만들어진 뒤 초기화하는데 사용되는 특별한 메서드로 ES2015 버전 이후로 생성자를 가진 클래스를 만들 수 있게 되었다. 이를 통해 기본으로 제공되는 생성자를 통해 클래스의 인스턴스 객체를 생성할 수 있다.
- 객체 생성
    - 자바스크립트에서 객체를 만들때는
        - 리터럴 표기법을 통한 빈 객체 생성
        - Object.create()를 통한 빈 객체 생성
        - new 키워드를 통한 빈 객체 생성
    - 이후 만들어진 객체에 키와 값을 할당할 수 있으며 상속 또한 가능하다.
- 생성자의 기본 특징
    - 클래스는 새 객체를 초기화하는 constructor()라는 이름의 메서드를 가지고 있어야한다.
    - 또한 new 키워드는 생성자를 호출할 수 있으며, 생성자 내부에서 사용된 this 키워드는 새로 생성된 해당 객체를 가리킨다.
- 프로토타입을 가진 생성자
    - 자바스크립트의 프로토타입 객체는 특정 객체의 모든 인스턴스 내에 공통 메서드를 쉽게 정의할 수 있다.
    - 생성자를 통해 객체를 생성하면 생성자의 프로토타입 객체에 속한 속성을 새 객체에서도 활용할 수 있다.

## 7.3 모듈 패턴

- 모듈은 애플리케이션 아키텍처의 핵심 구성 요소이며 프로젝트를 구성하는 코드 단위를 체계적으로 분리 및 관리하는 데 효과적으로 활용된다.
- 객체 리터럴
    - 객체 리터럴 표기법 : 객체는 중괄호안에서 키와 값을 쉼표로 구분하여 객체를 정의하는 방법
    - 선언시 new 연산자를 필요로 하지 않는다.
- 모듈 패턴
    - 클래스의 캡슐화를 위해 처음 고안되었으며, 현재는 자바스크립트 모듈을 사용하여 쉽게 사용이 가능하다.
- 비공개
    - 모듈 패턴은 클로저를 활용해 비공개 상태와 구성을 캡슐화한다. 이는 공개 및 비공개 메서드와 변수를 묶어 전역 스코프로의 유출을 방지하고 다른 개발자의 인터페이스와의 충돌을 예방한다.
    - 선언된 모듈 내부에서만 변수와 메서드를 사용할 수 있으며, 반환되는 객체에 포함된 변수와 메서드는 공개되었기에 다른 곳에서도 사용이 가능하다.
    - 반환된 객체에 포함된 변수를 미공개하려면 WeakMap()을 사용한다.(객체만 키로 설정할 수 있으며 순회가 불가능)
- 모듈 내부의 메서드들을 네임스페이스로 지정하며 포함시키면 다음 이점이 제공된다.
    - 비공개 자유성 : 모듈 내부에서만 사용 가능한 비공개 함수를 자유롭게 만들 수 있다. 다른 파일에서 접근할 수 없기에 완전한 비공개를 실현할 수 있다.
    - 디버깅 용이성 : 어떤 함수가 예외를 발생시켰는지 알아내려고 할 때 디버거에서 콜 스택을 찾기 쉬워진다.
- 모듈 패턴의 변형
    - 믹스인 가져오기 변형
        - 유틸 함수나 외부 라이브러리 같은 전역 스코프에 있는 요소를 모듈 내부의 고차 함수에 인자로 잔달할 수 있게 한다.
    - 내보내기 변형
        - 따로 이름을 지정해주지 않고 전역 스코프로 변수를 내보낸다.
- 장점
    - 캡슐화 개념보다 이해하기 쉽고 비공개를 지원하며, 공개되면 안되는 코드를 캡슐화 할 수 있다.
- 단점
    - 공개와 비공개 멤버를 서로 다르게 접근해야 한다.
    - 나중에 추가된 메서드에서는 비공개 멤버에 접근할 수 없다.
    - 유지보수가 조금 귀찮다.
- WeakMap을 사용한 최신 모듈 패턴
    - (코드 참고)

## 7.4 노출 모듈 패턴

- 모든 함수와 변수를 비공개 스코프에 정의하고 공개하고 싶은 부분만 포인터를 통해 비공개 요소에 접근할 수 있게 하는 익명 객체를 반환하는 패턴
- 장점
    - 코드의 일관성이 유지되고 가독성을 향상 시킴
- 단점
    - 비공개 함수를 참조하는 공개함수를 수정할 수 없다. 비공개 함수가 비공개 구현을 참조하기에 발생하며, 수정을 해도 함수가 변경될 뿐 참조된 구현이 변경되는 것은 아니기 때문..
    - 비공개 변수를 참조하는 공개 객체 멤버 또한 수정이 불가능하다.

## 7.5 싱글톤 패턴

- 클래스의 인스턴스가 오직 하나만 존재하도록 제한하는 패턴
- 전역에서 접근 및 공유해야 하는 단 하나의 객체가 필요할 때 유용하다.
- 초기화를 지연시킬 수 도 있다. 초기화 시점에 필요한 특정 정보가 유효하지 않을 수도 있기 때문
- 단점
    - 싱글톤임을 파악하는 것이 힘들다.
    - 테스트하기 힘들다.
    - 신중한 조정이 필요하다.
- 리액트의 상태관리
    - 리액트에선 싱글톤 대신 전역 상태관리 도구를 이용하여 개발할 수 도 있다. 이들은 싱글톤과는 달리 변경 불가능한 읽기 전용 상태를 제공한다.

## 7.6 프로토타입 패턴

- 이미 존재하는 객체를 복제해 만든 템플릿을 기반으로 새 객체를 생성하는 패턴
- 프로토타입의 상속을 기반으로 하며 프로토타입 역할을 할 전용 객체를 생성하기 된다.
- 장점
    - 다른 언어의 기능을 따라하지 않고 자바스크립트만이 가진 고유의 방식으로 작업할 수 있다.
    - 객체내 함수를 정의할 때 참조로 생성되어 모든 자식 객체가 동일한 함수를 가리키게 할 수 있어 성능상에서도 이점이 있다.

## 7.7 팩토리 패턴

- 객체를 생성하는 생성 패턴의 하나로, 생성자를 필요로하지 않지만 필요한 타입의 팩토리 객체를 생성하는 다른 방법을 제공함
- 동적인 요소나 애플리케이션 구조에 깊게 의지하는 등의 상황처럼 객체 생성 과정이 복잡할 때 특히 유용하다.
- 유용한 상황
    - 객체나 컴포넌트의 생성과정이 높은 복잡성을 가지고 있을 때
    - 상황에 맞춰 다양한 객체 인스턴스를 편리하게 생성할 수 있는 방법이 필요할 때
    - 같은 속성을 공유하는 여러개의 작은 객체 또는 컴포넌트를 다뤄야 할 때
- 사용하면 안되는 상황
    - 잘못된 상황에 적용하게 되면 애플리케이션의 복잡도가 크게 증가할 수 있다.
    - 객체 생성 인터페이스 제공이 작업 중인 라이브러리가 프레임워크의 설계 목표가 아니라면 생성자를 쓰는 것이 차라리 좋다.
- 추상 팩토리 패턴
    - 같은 목표를 가진 각각의 팩토리를 하나의 그룹으로 캡슐화하는 패턴
    - 객체가 어떻게 생성되는지 알 필요 없이 객체를 사용할 수 있게한다.
    - 객체의 생성 과정에 영향을 받지 않아야하거나 여러 타입의 객체로 작업해야하는 경우에 좋다.

## 7.8 구조 패턴

- 클래스와 객체의 구성을 다룬다.

## 7.9 퍼사드 패턴

- 실제 모습을 숨기고 꾸며낸 겉모습만을 세상에 드러내는 것을 의미하는 퍼사드에서 유래
- 심층적인 복잡성을 숨기고 사용하기 편리한 높은 수준의 인터페이스를 제공하는 패턴
- 클래스의 인터페이스를 단순화하고 코드의 구현 부분과 사용 부분을 분리한다.
- 이를 통해 하위 시스템에 직접 접근하기 보단 간접적으로 상호작용하여 에러를 줄일 수 있다.
- 사용하기 쉬우며 패턴 구현에 필요한 코드의 양이 적다는 장점이 있다.

## 7.10 믹스인 패턴

- C++, Lisp 같은 전통적인 프로그래밍 언어에서 믹스인은 서브클래스가 쉽게 상속받아 기능을 재사용할 수 있도록 하는 클래스

## 7.11 서브 클래싱

- 부모 클래스 객체에서 속성을 상속받아 새로운 객체를 만드는 것
- 서브 클래스는 부모 클래스에서 먼저 정의된 메서드를 오버라이드 하는 것도 가능하다.
- 오버라이드된 부모 클래스의 메서드를 호출하면 메서드 체이닝, 생성자를 호출하면 생성자 체이닝이라고 부른다.

## 7.12 믹스인

- 자바스크립트에서는 기능의 확장을 위해 믹스인의 상속을 이용한다. 새롭게 만들어지는 클래스는 부모 클래스로부터 메서드와 속성을 부여받는다. 또한 자신만의 속성과 메서드를 정의할 수도 있다.
- 믹스인은 최소한의 복잡성으로 객체의 기능을 빌리거나 상속할 수 있게 해준다. 다른 여러 클래스를 아울러 쉽게 공유할 수 있는 속성과 메서드를 가진 클래스이다.
-